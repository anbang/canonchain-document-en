# Canonchain Introduction

The Internet of Things (IoT) is an emerging topic with technical, social and economic significance. Projections for the impact of IoT on the Internet and the economy are remarkable, with some anticipating that as many as 100 billion connected IoT devices, as well as a global economic impact of more than $11 trillion by 2025. In the future, the total data generated by the IoT devices and the total amount of assets associated to the IoT business could be beyond any estimation.

However, the development of IoT still has enormous challenges and could stand in the way of reaching its full potential. We often see headlines about hacking of IoT devices, surveillance issues and privacy concerns have already captured the public's attention. Fortunately, this is where blockchain comes in. A blockchain network creates a secure and permanent method of recording data processed by IoT devices. This network of interconnected devices will be able to interact with their environment and make decisions without any human intervention, in addition to storing the data it collects safely and securely without the threat of that data getting leaked.

The trust and security brought by the blockchain technology could solve several critical problems in IoT business:

- Scalability: Currently, IoT has centralized architectures with many bottlenecks preventing large-scale expansion: soaring costs, system congestion, reduced reliability, and server vulnerability. Under the trust built upon the blockchain network, IoT devices are able to communicate and interact with each other in a peer-to-peer fashion greatly reducing the cost and speeding up the transaction, which makes the IoT network having unlimited expansion possibilities.
- Security: Any failure in the IoT system can expose multiple devices and huge amounts of highly personalized data. These security flaws typically revolve around three areas: authentication, connectivity, and transactions. By using blockchains to manage access to data by IoT devices, no attacker will be able to bypass a new security layer on top of these security vulnerabilities.
- Data as assets: Data generated by IoT devices is usually submitted to and stored in servers that belong to big companies. The data is evaluated by oligopolistic players and the producers of the data usually don't get a fair share of the value. Blockchain technology allows devices to share data in a trusted and transparent environment, embodying the value of data through peer-to-peer exchange.

Canonchain is a public blockchain with trustable and efficient value transfer protocol built for IoT ecosystem with edge devices as nodes. Devices that access Canonchain would not only share computing power and storage, but also share their data and credibility.

>
The vision of Canonchain is to integrate all of the world's IoT devices through blockchain technology to become a supercomputer with highly flexible configuration that can handle massive amounts of data and large-scale transactions to meet a variety of business needs.

## FLUID mainnet

Based on this vision, the Canonchain team pushes the boundaries of public blockchain technologies in three directions.

- Higher throughput and unlimited secure storage - In IoT, massive amount of transactions should be processed rapidly and data should be stored securely, which is a fundamental requirement for building an IoT infrastructure.
- Broader coverage - Any type of IoT device, that is not limited by its hardware or software, could be connected to a blockchain network. For example, many edge devices have a very tiny amount of computing power and storage space, but they handle important data, and thus, to increase their security, they should be a part of a blockchain network.
- Efficiency and fairness - Any type of devices connected to a blockchain should share the benefits of the whole ecosystem. A blockchain has to provide incentives to all the devices to share their resource and data. The incentive mechanism has to be well designed so that the devices can collaborate in the most efficient way.

The Canonchain team has made lots of innovations and break-throughs in the development of the first generation mainnet named FLUID: the acronym for the five English words Fast, Light, United, Intelligent and Decentralized.

- **F**ast - In a single shard, Canonchain currently supports a peak rate of over 10,000 transactions per second (TPS), with an average of over 1500 TPS.
- **L**ight - Every account in Canonchain has an individual chain to record all its transactions. The consensus algorithm in Canonchain has deterministic finality. In addition, the transaction fee in Canonchain is  designed to be low. All these features allow exceptionally light design of Canonchain physical nodes.
- **U**nited - The resource marketplace and the Proof of Participation (PoP) mechanism built in Canonchain enable all nodes participating computation and data storage to receive rewards fairly and transparently. From game theory point of view, all the blockchain nodes are selfish and try to maximize their own interests. However, by designing PoP mechanism, the operation equilibrium point of the nodes in Canonchain is socially optimal.
- **I**ntelligent - Canonchain is a public chain that can deploy smart contracts on DAG.
- **D**ecentralized - The concensus on Canonchain is maintained by a limited number of witnesses, so it is not fully decentralized. However, any account in Canonchain has a chance to elect witnesses by the amount of stake it owns. In addition, Canonchain consensus algorithm allows nearly 100 witnesses and requires low hardware configuration of witness physical nodes so that more nodes could be qualified as witness candidates. Therefore, Canonchain maintains a good decentralization under the premise of high performance.

## R-DAG

DAG (Directional Acyclic Graph) is a blockchain technology that has been deployed in IoT use cases. It has the advantages of high concurrency, high throughput and low transaction fee. The Canonchain technical team deeply optimized and improved the traditional DAG technology based on our new vision and design requirements. By introducing certain rules on a new block selecting parent blocks, the overall DAG can achieve supreme performance. We call it R-DAG (Regularized Directional Acyclic Graph).

<p align="center">
<img src="https://github.com/canonchain/canonchain-document/blob/master/docs/source/R-DAG.png?raw=true" width="500"></img><br>
Figure 1: Example of R-DAG structure
</p>

As with the traditional DAG structure, each block in Canonchain contains references to the previous blocks, so called the parent blocks. The blocks and the connections between them are the vertices and edges of the DAG, respectively. As shown in Figure 1, R-DAG technology divides the entire DAG structure into two layers, which we call the *Concensus Layer* and the *Transaction Layer*. The rules enforced by R-DAG is the following:

- A block in the transaction layer only refers to the latest block from the same account. Therefore, in Canonchain each account has its own individual chain that records all the transactions of the account. The *one chain per account* design in the transaction layer has two benifits. Firstly, it enables each account sending data at high speed without affecting the consensus of the whole network, thus achieving high throughput of the entire network. Secondly, it makes the design of Canonchain light node extremely simple, which greatly facilitate the deployment of Canonchain nodes to edge IoT devices.
- The consensus algorithm of Canonchain runs on the consensus layer. The structure of the consensus layer is similar to the traditional DAG. First, all the Canonchain nodes reach consensus independently on the order the blocks in the consensus layer. Then, the order of the transaction layer blocks is determined by the reference relationship of the consensus layer blocks to the transaction layer blocks, which is analogy to the process of miners packing transactions in Bitcoin and Ethereum. The consensus layer has the sole purpose of reaching consensus among nodes, and the actual transactions take place in the transaction layer.

### Witness

All blocks in the consensus layer are created by a certain number of non-anonymous and reputable people or companies. These individuals or companies may have a good and long-lasting reputation in Canonchain community, or have a huge interest in maintaining the healthy development of Canonchain, which we call witnesses. Witness nodes should have necessarily required physical capabilities and be able to publish transactions frequently and remain honest. The witness is the ultimate maintainer of the ledger in Canonchain. Witnesses are generated through token staking and community elections and can be replaced after a certain amount of time.

### Main Chain

The consensus in Canonchain is achieved by all nodes ordering the blocks on DAG independently. A node first finds the stable main chain in the consensus layer of its local DAG. The node first order the blocks on the stable main chain and then all the other blocks by the following algorithm. 

1. It first defines indices for the blocks that are on the stable main chain. The index of the genesis block is 0; the index of the next block on the main chain refering the genesis block is 1; and so on. By advancing along the stable main chain, each block on the stable main chain is assinged an index.
2. For any block that is not on the stable main chain, its index is equal to the index of the block on the stable main chain that first directly or indirectly referred it.
3. Finally, each node can use the following rules to determine the order of any two blocks B1 and B2 with the specified index: B1 before B2 if and only if a) B1 has an index lower than B2; or b) B1 and B2 have the same index but B1 is directly or indirectly referenced by B2; or c) B1 and B2 have the same index but no reference relationship, and the block hash of B1 is smaller than B2.

As shown in Fig. 1, a node attempts to determine the order of two blocks B1 and B2 marked in blue. The stable main chain found by the node through the local DAG is marked with bold arrows, and the number within each block is an index assigned. Now, block B1 has index 3 and block B2 has index 4. Therefore, since the index of B1 is lower than B2, the node will determine that B1 is before B2.

## Technical Article

If you want to learn more about the consensus algorithm in Canonchain and the proof of its security, please see our technical article <a href="https://github.com/canonchain/canonchain-document/blob/master/docs/ Source/Consensus%20Algorithm_v2.1.pdf">*Consensus and Security in Canonchain*</a>.